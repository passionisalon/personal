<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="org.zerock.myapp.mapper.TravelMapper">
  	<select id="getTravelList" resultType="org.zerock.myapp.domain.TravelDTO">
  		SELECT *
  		FROM tbl_travel
  		WHERE 
  			title LIKE '%' || #{keyword} || '%'
  			AND
  			category LIKE '%' || #{searchType} || '%'
  		ORDER BY
  			seq DESC
  		OFFSET (#{currPage} - 1) * #{amount} ROWS
  		FETCH NEXT #{amount} ROWS ONLY 
  	</select>
  	
  	<select id="getSelectTravel" resultType="org.zerock.myapp.domain.TravelDTO">
  		SELECT *
  		FROM tbl_travel
  		WHERE seq = #{seq}
  	</select>
  	
  	<select id="getPageTotalAmount" resultType="java.lang.Integer">
  		SELECT
  			count(*)
  		FROM 
  			tbl_travel
<!--   		WHERE -->
<!--   			title LIKE '%' || #{keyword} || '%' -->
<!--   			AND -->
<!--   			category LIKE '%' #{searchType} || '%' -->
  	</select>
  	
  	<insert id="travelInsert">
  		INSERT INTO
  			tbl_travel
  		(
  			seq,
  			writer,
  			category,
  			title,
  			content,
  			address,
  			total,
  			write_date,
  			modify_date
  		)
  		VALUES 
  		(
  			#{seq},
  			#{writer},
  			#{category},
  			#{title},
  			#{content},
  			#{address},
  			#{total},
  			#{write_date},
  			#{modify_date}
  		)
  			
  	</insert>
  	
  	
  	
  	
  </mapper>