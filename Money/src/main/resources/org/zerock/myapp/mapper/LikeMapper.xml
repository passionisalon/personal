<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="org.zerock.myapp.mapper.LikeMapper">
  
  	<sql id="likeInclude">
  			email = #{Email}
			AND
			board_seq = #{board_seq}
			AND
			board = #{board}
  	</sql>
  
	<insert id="setLike">
		INSERT INTO
			tbl_like
		VALUES
		(
			like_SEQ.NEXTVAL,
			#{Email},
			#{board_seq},
			#{board}
		)
		
	</insert>
	
	<delete id="removeLike">
		DELETE FROM
			tbl_like
		WHERE
			1=1
			<include refid="likeInclude"/>
		
	</delete>
	
	<select id="selectLikeList" resultType="org.zerock.myapp.domain.LikeDTO">
		SELECT *
		FROM 
		(
			SELECT
				/*+ INDEX_DESC(tbl_auditor PK_board) */
				*
			FROM
				tbl_like
			WHERE
				1=1
				<include refid="likeInclude"/>
		)
	</select>
  
</mapper>
  	